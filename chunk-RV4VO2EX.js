import{a as j}from"./chunk-DCMS2NDG.js";import{a as D}from"./chunk-G57F2NPT.js";import{a as E}from"./chunk-XJV2YYA6.js";import"./chunk-ZSSD5RUB.js";import{Ca as S,E as a,Ea as u,Fa as d,I as h,J as g,Ma as l,Na as v,Ya as L,Z as _,_a as W,aa as n,ga as b,la as x,mb as I,pa as w,ta as f,va as y,wa as C,xa as r,ya as s,yb as T,za as c}from"./chunk-Z7MIYTMB.js";import"./chunk-4CLCTAJ7.js";var F=(i,t)=>t.id;function P(i,t){i&1&&(r(0,"span"),c(1,"i",15),s())}function U(i,t){i&1&&(r(0,"span"),c(1,"i",15),s())}function V(i,t){if(i&1){let e=S();r(0,"div",4)(1,"div",5),c(2,"img",6),s(),r(3,"div",7)(4,"div",8)(5,"h3",9),l(6),s(),r(7,"h5",10)(8,"span",11),l(9),L(10,"currency"),s()()(),r(11,"div",12)(12,"button",13),u("click",function(){let m=h(e).$implicit,p=d();return g(p.removeWishlistItem(m._id))}),l(13," remove from wishlist "),x(14,P,2,0,"span"),s(),r(15,"button",14),u("click",function(){let m=h(e).$implicit,p=d();return g(p.addToCart(m.id))}),l(16," add to cart "),x(17,U,2,0,"span"),s()()()()}if(i&2){let e=t.$implicit,o=d();n(2),w("src",e.imageCover,_)("alt",e.category.name),n(4),v(e.title),n(3),v(W(10,6,e.price,"EGP")),n(5),f(o.isLoading?14:-1),n(3),f(o.isLoading?17:-1)}}var k=class i{wishlistService=a(j);activatedRoute=a(T);cartService=a(E);toastrService=a(D);ngOnInit(){this.getUserId(),this.getUserWishlist()}wishListDetails=[];isLoading=!1;userId="";addToWishlist(t){this.wishlistService.addProductToWishList(t).subscribe({next:e=>{console.log(e)},error:e=>{console.log(e)}})}removeWishlistItem(t){this.isLoading=!0,this.wishlistService.removeWishlistProduct(t).subscribe({next:e=>{console.log(e),this.wishListDetails=e.data,this.isLoading=!1},error:e=>{console.log(e),this.isLoading=!0}})}getUserId(){this.activatedRoute.paramMap.subscribe({next:t=>{this.userId=t.get("id")}})}getUserWishlist(){this.wishlistService.getLoggedUserWishList().subscribe({next:t=>{console.log(t.data),this.wishListDetails=t.data,console.log(this.wishListDetails)},error:t=>{console.log(t)}})}addToCart(t){this.isLoading=!0,this.cartService.addProductToCart(t).subscribe({next:e=>{console.log(e),this.toastrService.success(e.message," "),this.isLoading=!1},error:e=>{console.log(e),this.isLoading=!0}})}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=b({type:i,selectors:[["app-wishlist"]],decls:8,vars:0,consts:[[1,"w-4/5","bg-gray-100","border","border-gray-400","rounded-md","shadow","p-4","mx-auto","my-4"],[1,"flex","flex-col","sm:flex-col","sm:justify-between"],[1,"self-center","sm:self-start"],[1,"text-green-500","text-2xl","font-semibold","text-center","sm:text-start"],[1,"grid","sm:grid-cols-[20%_minmax(0,1fr)]","bg-gray-200","hover:bg-gray-300","my-2","rounded-lg"],[1,"p-3","flex","justify-center","items-center"],[1,"w-[100px]","h-[100px]","rounded-xl",3,"src","alt"],[1,"flex","flex-col","items-center","justify-center","sm:flex-row","sm:justify-between","sm:items-center","sm:w-[90%]"],[1,"flex","flex-col","justify-center","items-center","mb-4"],[1,"my-2","text-center","sm:text-start","text-xl","font-[600]","sm:self-start"],[1,"my-2","text-center","text-green-600","sm:self-start"],[1,"text-yellow-500"],[1,"flex","flex-row","justify-center","items-center","gap-2","my-4"],[1,"bg-red-400","px-1","rounded-lg","text-red-950","hover:bg-red-600","border-red-600","border-[2px]","hover:text-white",3,"click"],[1,"bg-[#24B425]","px-1","rounded-lg","hover:bg-green-600","border-green-500","border-[2px]","hover:text-white",3,"click"],[1,"fas","fa-spin","fa-spinner"]],template:function(e,o){e&1&&(r(0,"Section",0)(1,"div")(2,"div",1)(3,"div",2)(4,"h2",3),l(5," WishList"),s()(),y(6,V,18,9,"div",4,F),s()()()),e&2&&(n(6),C(o.wishListDetails))},dependencies:[I],encapsulation:2})};export{k as WishlistComponent};
