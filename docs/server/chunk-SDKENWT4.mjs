import './polyfills.server.mjs';
import{a as V}from"./chunk-LPFLUTBB.mjs";import{c as P}from"./chunk-23FX4FOH.mjs";import{Ba as g,E as y,Fa as w,Ha as k,Ia as E,Ja as r,K as C,Ka as n,L as v,La as d,Oa as D,Pb as j,Qa as x,Ra as f,Ya as c,Za as p,_a as _,eb as T,ga as h,ib as s,ja as i,jb as m,kb as b,lc as B,pa as I,ua as S}from"./chunk-AQGHY2O6.mjs";import"./chunk-X2SEQXRR.mjs";var $=(o,t)=>t.product.id,L=o=>["/checkout",o];function N(o,t){if(o&1&&(r(0,"h4",4),c(1),s(2,"translate"),r(3,"span",10),c(4),s(5,"currency"),n()()),o&2){let e=f();i(),_("",m(2,2,"shopcart.Total cart price")," : "),i(3),p(b(5,4,e.cartDetails.totalCartPrice,"EGP"))}}function O(o,t){if(o&1){let e=D();r(0,"div",7)(1,"div",11),d(2,"img",12),n(),r(3,"div",13)(4,"div",14)(5,"h3",15),c(6),n(),r(7,"h5",16),c(8),s(9,"translate"),r(10,"span",17),c(11),s(12,"currency"),n()(),r(13,"button",18),x("click",function(){let l=C(e).$implicit,u=f();return v(u.removeCartItem(l.product.id))}),d(14,"i",19),c(15),s(16,"translate"),n()(),d(17,"div"),r(18,"div",20)(19,"button",21),x("click",function(){let l=C(e).$implicit,u=f();return v(u.updateCount(l.product.id,l.count-1))}),d(20,"i",22),n(),r(21,"p"),c(22),n(),r(23,"button",21),x("click",function(){let l=C(e).$implicit,u=f();return v(u.updateCount(l.product.id,l.count+1))}),d(24,"i",23),n()()()()}if(o&2){let e=t.$implicit;i(2),g("src",e.product.imageCover,h)("alt",e.product.title),i(4),p(e.product.title),i(2),_("",m(9,7,"shopcart.Price")," : "),i(3),p(b(12,9,e.price,"EGP")),i(4),_(" ",m(16,12,"shopcart.remove item"),""),i(7),p(e.count)}}var F=class o{cartService=y(V);cartDetails={};ngOnInit(){this.getCartData()}getCartData(){this.cartService.getLoggedUserCart().subscribe({next:t=>{console.log(t.data),this.cartDetails=t.data},error:t=>{console.log(t)}})}removeCartItem(t){this.cartService.removeSpecificCartItem(t).subscribe({next:e=>{console.log(e),this.cartDetails=e.data,this.cartService.cartNumber.set(e.numOfCartItems)},error:e=>{console.log(e)}})}updateCount(t,e){this.cartService.updateCartQuantity(t,e).subscribe({next:a=>{console.log(a),this.cartDetails=a.data},error:a=>{console.log(a)}})}emptyCartItems(){this.cartService.emptyCart().subscribe({next:t=>{console.log(t),t.message==="success"&&(this.cartDetails={},this.cartService.cartNumber.set(0))}})}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=I({type:o,selectors:[["app-cart"]],decls:17,vars:13,consts:[[1,"w-4/5","bg-gray-100","border","border-gray-400","rounded-md","shadow","p-4","mx-auto","my-4"],[1,"flex","flex-col","sm:flex-row","sm:justify-between"],[1,"self-center","sm:self-start"],[1,"text-green-500","text-2xl","font-semibold","text-center","sm:text-start"],[1,"text-green-500","text-xl","my-4","font-[600]"],[1,"self-center","sm:self-end"],[1,"btn-remove","mr-4",3,"click"],[1,"grid","sm:grid-cols-[20%_minmax(0,1fr)]","bg-gray-200","hover:bg-gray-300","my-2","rounded-lg"],[1,"flex","justify-center","items-center","sm:justify-start"],[1,"btn-main","mt-6","mr-4",3,"routerLink"],[1,"text-yellow-500","underline"],[1,"p-3","flex","justify-center","items-center"],[1,"w-[100px]","h-[100px]","rounded-xl",3,"src","alt"],[1,"flex","flex-col","items-center","justify-center","sm:flex-row","sm:justify-between","sm:items-center","sm:w-[90%]"],[1,"flex","flex-col","justify-center","items-center","mb-4"],[1,"my-2","text-center","sm:text-start","text-xl","font-[600]","sm:self-start"],[1,"my-2","text-center","text-green-600","sm:self-start"],[1,"text-yellow-500"],[1,"sm:self-start",3,"click"],[1,"fas","fa-trash-can","text-green-500"],[1,"flex","flex-row","justify-center","items-center","gap-2","my-4"],[1,"bg-[#24B425]","px-1","rounded-lg","hover:bg-gray-600","border-gray-500","border-[2px]","hover:text-white",3,"click"],[1,"fas","fa-minus"],[1,"fas","fa-plus"]],template:function(e,a){e&1&&(r(0,"section",0)(1,"div",1)(2,"div",2)(3,"h2",3),c(4),s(5,"translate"),n(),S(6,N,6,7,"h4",4),n(),r(7,"div",5)(8,"button",6),x("click",function(){return a.emptyCartItems()}),c(9),s(10,"translate"),n()()(),k(11,O,25,14,"div",7,$),r(13,"div",8)(14,"button",9),c(15),s(16,"translate"),n()()()),e&2&&(i(4),p(m(5,5,"shopcart.Shop cart")),i(2),w(a.cartDetails.totalCartPrice>1?6:-1),i(3),p(m(10,7,"shopcart.Empty cart")),i(2),E(a.cartDetails.products),i(3),g("routerLink",T(11,L,a.cartDetails._id)),i(),p(m(16,9,"shopcart.Checkout")))},dependencies:[j,B,P],encapsulation:2})};export{F as CartComponent};
