import './polyfills.server.mjs';
import{a as T,b as g,c as I,d as q,h as M,i as N,j as B,k as G,l as L,m as D}from"./chunk-YYN6UEDP.mjs";import{c as w}from"./chunk-23FX4FOH.mjs";import{a as R}from"./chunk-YTXXH724.mjs";import{Ba as _,E as b,Fa as d,Ja as e,Ka as t,La as c,M as x,N as v,Qa as S,Ra as C,Ya as l,Za as h,_a as E,hc as F,ib as u,ja as a,jb as s,pa as y,ua as m}from"./chunk-AQGHY2O6.mjs";import"./chunk-X2SEQXRR.mjs";function A(i,o){i&1&&(e(0,"li"),l(1,"Adress Details is Required"),t())}function H(i,o){if(i&1&&(e(0,"div",6),x(),e(1,"svg",13),c(2,"path",14),t(),v(),e(3,"div")(4,"span",15),l(5,"Ensure that these requirements are met:"),t(),e(6,"ul",16),m(7,A,2,0,"li"),t()()()),i&2){let r,n=C();a(7),d((r=n.checkoutForm.get("details"))!=null&&r.getError("required")?7:-1)}}function O(i,o){i&1&&(e(0,"li"),l(1,"phone is Required"),t())}function P(i,o){i&1&&(e(0,"li"),l(1,"Egy mobile number is must"),t())}function Z(i,o){if(i&1&&(e(0,"div",6),x(),e(1,"svg",13),c(2,"path",14),t(),v(),e(3,"div")(4,"span",15),l(5,"Ensure that these requirements are met:"),t(),e(6,"ul",16),m(7,O,2,0,"li")(8,P,2,0,"li"),t()()()),i&2){let r,n=C();a(7),d((r=n.checkoutForm.get("phone"))!=null&&r.getError("required")?7:(r=n.checkoutForm.get("phone"))!=null&&r.getError("pattern")?8:-1)}}function j(i,o){i&1&&(e(0,"li"),l(1,"city is Required"),t())}function $(i,o){if(i&1&&(e(0,"div",6),x(),e(1,"svg",13),c(2,"path",14),t(),v(),e(3,"div")(4,"span",15),l(5,"Ensure that these requirements are met:"),t(),e(6,"ul",16),m(7,j,2,0,"li"),t()()()),i&2){let r,n=C();a(7),d((r=n.checkoutForm.get("city"))!=null&&r.getError("required")?7:-1)}}function z(i,o){i&1&&c(0,"i",12)}var V=class i{formBuilder=b(G);activatedRoute=b(F);ordersService=b(R);checkoutForm;cartId="";isLoading=!1;ngOnInit(){this.checkoutFormSubmit(),this.getCartId()}checkoutFormSubmit(){this.checkoutForm=this.formBuilder.group({details:[null,[g.required]],phone:[null,[g.required,g.pattern(/^01[0125][0-9]{8}$/)]],city:[null,[g.required]]})}getCartId(){this.activatedRoute.paramMap.subscribe({next:o=>{this.cartId=o.get("id")}})}submitForm(){console.log(this.checkoutForm.value),this.isLoading=!0,this.ordersService.checkoutPayment(this.cartId,this.checkoutForm.value).subscribe({next:o=>{console.log(o),open(o.session.url,"_self"),this.isLoading=!1},error:o=>{console.log(o),this.isLoading=!1}})}static \u0275fac=function(r){return new(r||i)};static \u0275cmp=y({type:i,selectors:[["app-checkout"]],decls:27,vars:21,consts:[[1,"w-2/3","bg-gray-100","border","border-gray-400","rounded-md","shadow","p-4","mx-auto","my-4"],[1,"text-2xl","text-start","text-green-500","font-medium","mb-5","ml-2"],[3,"ngSubmit","formGroup"],[1,"mb-5","pl-4"],["for","details",1,"block","mb-2","text-sm","font-medium","text-green-600","dark:text-white","ml-3"],["formControlName","details","type","text ","id","details",1,"bg-white","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-green-500","focus:border-green-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-green-500","dark:focus:border-green-500"],["role","alert",1,"flex","p-4","mb-4","text-sm","text-red-800","rounded-lg","bg-red-50","dark:bg-gray-800","dark:text-red-400"],["for","phone",1,"block","mb-2","text-sm","font-medium","text-green-600","dark:text-white","ml-3"],["formControlName","phone","type","tel","id","phone",1,"bg-white","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-green-500","focus:border-green-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-green-500","dark:focus:border-green-500"],["for","city",1,"block","mb-2","text-sm","font-medium","text-green-600","dark:text-white","ml-3"],["formControlName","city","type","tel","id","city",1,"bg-white","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-green-500","focus:border-green-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-green-500","dark:focus:border-green-500"],["type","submit",1,"btn-main",3,"disabled"],[1,"fas","fa-spin","fa-spinner"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 20 20",1,"shrink-0","inline","w-4","h-4","me-3","mt-[2px]"],["d","M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"],[1,"font-medium"],[1,"mt-1.5","list-disc","list-inside"]],template:function(r,n){if(r&1&&(e(0,"Section",0)(1,"h1",1),l(2),u(3,"translate"),t(),e(4,"form",2),S("ngSubmit",function(){return n.submitForm()}),e(5,"div",3)(6,"label",4),l(7),u(8,"translate"),t(),c(9,"input",5),m(10,H,8,1,"div",6),t(),e(11,"div",3)(12,"label",7),l(13),u(14,"translate"),t(),c(15,"input",8),m(16,Z,9,1,"div",6),t(),e(17,"div",3)(18,"label",9),l(19),u(20,"translate"),t(),c(21,"input",10),m(22,$,8,1,"div",6),t(),e(23,"button",11),l(24),u(25,"translate"),m(26,z,1,0,"i",12),t()()()),r&2){let p,f,k;a(2),h(s(3,11,"checkout.checkout")),a(2),_("formGroup",n.checkoutForm),a(3),h(s(8,13,"checkout.Adress Details")),a(3),d((p=n.checkoutForm.get("details"))!=null&&p.errors&&((p=n.checkoutForm.get("details"))!=null&&p.touched)?10:-1),a(3),h(s(14,15,"checkout.Phone")),a(3),d((f=n.checkoutForm.get("phone"))!=null&&f.errors&&((f=n.checkoutForm.get("phone"))!=null&&f.touched)?16:-1),a(3),h(s(20,17,"checkout.City")),a(3),d((k=n.checkoutForm.get("city"))!=null&&k.errors&&((k=n.checkoutForm.get("city"))!=null&&k.touched)?22:-1),a(),_("disabled",n.checkoutForm.invalid),a(),E(" ",s(25,19,"checkout.Online Checkout")," "),a(2),d(n.isLoading?26:-1)}},dependencies:[L,M,T,I,q,D,N,B,w],encapsulation:2})};export{V as CheckoutComponent};
